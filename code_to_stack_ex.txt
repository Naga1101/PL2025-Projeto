# writeln para stack machine

pushs // string que vai escrever
writes // escreve a string
writeln // escreve uma newline
codigo
// Initialize fp (frame pointer)
START                   
// Push the string to the string heap
// and its address to the stack
PUSHS "Ola, Mundo!"     
//  Write the string
WRITES                  
// Print newline
WRITELN                 
// End program
STOP                    


# adição e print de resultado
program Maior3;
var
    num1, num2, num3, maior: Integer;
    bol1, bol2: Boolean;
begin
    num1 := 5;
    num2 := 7;
    write(num1 + num2);
end.
# As variaveis nao utilizadas nao precisam dee ser declaradas 
# codigo maquina
// Initialize frame pointer
START                   

// Assign 5 to num1
PUSHI 5                 // Push integer 5
STOREL 0                // Store in fp[0] (num1)

// Assign 7 to num2
PUSHI 7                 //  Push integer 7
STOREL 1                // Store in fp[1] (num2)

// Now perform addition
PUSHL 0                 // Load num1
PUSHL 1                 // Load num2
ADD                     // num1 + num2
WRITEI                  // Output result

STOP                    // End program


# codigo com funcs
program SumExample;

function Add(a: integer; b: integer): integer;
begin
    x := a + b;
end;

var
    num1, num2, result: integer;
begin
    num1 := 5;
    num2 := 3;
    result := Add(num1, num2);
    writeln('The sum is: ');
end.


JUMP main                // Jump over function

// ————— FUNCTION: Add —————
Add:
    PUSHL -2              // Load a
    PUSHL -1              // Load b
    ADD
    RETURN

// ————— MAIN —————
main:
    START

    PUSHI 5              // num1 := 5
    STOREG 0             // Store num1 in g[n]

    PUSHI 3              // num2 := 3
    STOREG 1             // Store num2 in g[n]

    PUSHL 0              // Push num1 (a)
    PUSHL 1              // Push num2 (b)
    PUSHA Add            // Push function address
    CALL

    STOREG 2             // result := returned value
    PUSHS "The sum is: "
    WRITES
    WRITELN

    PUSHG 2              // Print result
    WRITEI
    WRITELN

    STOP